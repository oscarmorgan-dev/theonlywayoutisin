<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Portfolio Landing Page</title>
    <link href="https://fonts.googleapis.com/css2?family=KH+Teka:wght@400&display=swap" rel="stylesheet">
    <style>
        @font-face {
            font-family: 'MonumentGrotesk-Semi-Mono';
            src: url('MonumentGrotesk-Semi-Mono.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'Sigurd';
            src: url('fonnts.com-Sigurd-Variable-Light.otf') format('opentype');
            font-weight: 300;
            font-style: normal;
        }
        :root { --side-margin: 80px; --content-pad: 40px; }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        html, body { height: 100%; overflow: hidden; }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-color: #fff; /* explicit white background */
        }

        /* Unified hero architecture */
        .hero { position: fixed; inset: 0; height: 100vh; width: 100vw; overflow: hidden; z-index: 1; touch-action: none; }
        .bg {
            position: absolute;
            top: 0; left: var(--side-margin); right: var(--side-margin);
            will-change: transform;
        }
        .bg .background-block { height: 100vh; }
        .bg .background-block img { width: 100%; height: 100%; object-fit: cover; object-position: center; display: block; }

        /* Show more of the top of the very first image */
        .bg .background-block:first-child img {
          object-position: 50% 15%;
        }

        /* On smaller screens, favour the top even more */
        @media (max-width: 768px) {
          .bg .background-block:first-child img { object-position: 50% 10%; }
        }
        @media (max-width: 480px) {
          .bg .background-block:first-child img { object-position: 50% 8%; }
        }

        @media (max-width: 768px) {
          .hero { height: 100svh; }
          .bg .background-block { height: 100svh; }
          .left-margin,
          .right-margin { height: 100svh; }
        }
        .background-separator { height: 28px; background: #fff; border-top: 2px solid #333; border-bottom: 2px solid #333; }

        /* Footer pointer events */
        .footer-panel { pointer-events: none; }
        .footer-panel .final-text-overlay,
        .footer-panel a,
        .footer-panel button,
        .final-navigation-links { pointer-events: auto; }

        /* Left Margin with Ruler */
        .left-margin {
            position: fixed;
            left: 0;
            top: 0;
            width: var(--side-margin);
            height: 100vh;
            background-color: white;
            z-index: 999;
            border-right: 2px solid #333;
        }

        /* Right Margin */
        .right-margin {
            position: fixed;
            right: 0;
            top: 0;
            width: var(--side-margin);
            height: 100vh;
            background-color: white;
            z-index: 999;
            border-left: 2px solid #333;
        }




        /* Fixed Navigation Bar */
        .nav-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 28px; /* Reverted to previous desktop size */
            background-color: white; /* White background */
            border-bottom: 2px solid #333; /* Thin black bottom border matching margins */
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between; /* Space between left, center, and right elements */
            padding: 0 20px;
        }

        .nav-text {
            font-family: 'KH Teka', Arial, sans-serif;
            font-weight: 400;
            color: black; /* Black text */
            font-size: 16px; /* Match text overlay benchmark */
            margin: 0;
        }

        .nav-play-button {
            background: none;
            border: none;
            cursor: pointer;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
          display: flex;
          align-items: center;
          justify-content: center;
          width: 28px;
          height: 28px;
          color: #000;               /* drives SVG fill via currentColor */
          transition: opacity .2s ease, transform .2s ease;
          padding: 0;
          margin: 0;
        }
        .nav-play-button .icon { width: 14px; height: 14px; fill: currentColor; display: block; }
        .nav-play-button .icon-pause { display: none; }
        .nav-play-button.is-playing .icon-play { display: none; }
        .nav-play-button.is-playing .icon-pause { display: block; }

        .nav-play-button:hover { opacity: 0.7; }
        .nav-play-button:active { opacity: 0.5; }

        .nav-depth-counter {
            font-family: 'KH Teka', Arial, sans-serif;
            font-weight: 400;
            color: black; /* Black text */
            font-size: 16px; /* Match text overlay benchmark */
            margin: 0;
            font-variant-numeric: tabular-nums; /* prevents jitter when numbers change */
        }


        .background-block {
            width: 100%;
            display: block;
        }


        /* Ensure no gaps between images */
        .background-block:not(:last-child) {
            margin-bottom: 0;
        }

        /* White separator between background images */
        

        /* Unified scroll source: text panel */
        .text-panel {
            position: absolute;
            left: 50%; transform: translateX(-50%);
            top: 10vh; width: 48%; max-width: 640px; height: 80vh;
            background: rgba(255,255,255,0.95);
            border: 2px solid #333; padding: var(--content-pad); overflow-y: auto; overflow-x: hidden;
            backdrop-filter: blur(5px); box-shadow: 0 10px 30px rgba(0,0,0,.3);
            overscroll-behavior: contain;
            z-index: 2;
            -webkit-overflow-scrolling: touch;
            touch-action: pan-y;
        }
        .text-panel p { font-family: 'KH Teka', Arial, sans-serif; font-size: 16px; line-height: 1.28; color:#333; margin-bottom:20px; text-align: justify; hyphens: auto; }
        .text-panel img { width: 50%; max-width: 200px; height: auto; display:block; margin: 30px auto; }

        /* Image boxes and separators */
        .image-box {
          height: 500px;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
            border: 2px solid #333;
          box-sizing: border-box;
          margin-bottom: 40px;
        }

        .image-box img,
        .small-image-box img {
          width: 100%;
          height: 100%;
          object-fit: cover;
          object-position: center;
          display: block;
          margin: 0;
          max-width: none;
        }

        .image-separator {
          height: 28px;
          background: #fff;
          border-top: 2px solid #333;
          border-bottom: 2px solid #333;
          box-sizing: border-box;
        }

        /* Natural aspect ratio boxes for journey images */
        .image-box-natural {
          height: auto;
          min-height: 200px;
          padding: 0;
          border: 2px solid #333;
          box-sizing: border-box;
          margin-bottom: 40px;
        }

        .image-box-natural img {
          width: 100%;
            height: auto;
          object-fit: contain;
            display: block;
          margin: 0 auto;
        }

        /* Small 300x300 image boxes */
        .small-image-box {
          width: 300px;
          height: 300px;
          display: block;
          margin: 0 auto 40px auto;
          border: 2px solid #333;
          box-sizing: border-box;
          background: transparent;
          overflow: hidden;
        }


        /* Remove bottom margin from last image box */
        .image-box:last-child,
        .image-box-natural:last-child,
        .small-image-box:last-child {
          margin-bottom: 0;
        }

        /* Title image styling */
        .title-image {
          display: flex;
          justify-content: center;
          align-items: flex-start;
          margin-bottom: 40px;
          padding: 0 var(--side-margin);
        }

        .title-image img {
          width: 300px;
          height: auto;
          display: block;
        }

        /* Title text styling */
        .title-text {
          margin-bottom: 40px;
          text-align: center;
        }
        
        /* Hero intro text box under top cube */
        .hero-text-box {
          border: none;
          background: transparent;
          padding: var(--content-pad) 0; /* align with left/right panel edge */
          margin: 16px 0 0 0;
        }
        .hero-text-box p { font-family: 'MonumentGrotesk-Semi-Mono', Arial, sans-serif; font-size: 11.2px; line-height: 1.28; color:#333; margin: 0; text-align: left; }
        .hero-spacer { height: 28px; }
        /* word-by-word fade-up rollout for hero title */
        .hero-text { line-height: 1.152; transform: translateY(-20%); }
        .hero-word { display: inline-block; opacity: 0; filter: blur(4px); animation: heroWordIn .267s ease-out forwards; animation-delay: var(--d, 0s); margin-right: 0.25em; }
        @keyframes heroWordIn { to { opacity: 1; filter: blur(0); } }
        @media (prefers-reduced-motion: reduce) { .hero-word { opacity: 1; filter: none; animation: none; } }

        /* Hero CTA button */
        .hero-cta {
          display: inline-block;
          margin-top: 12px;
          padding: 0;
          border: none;
          background: transparent;
          color: #000;
          text-decoration: none;
          font-family: 'MonumentGrotesk-Semi-Mono', Arial, sans-serif;
          font-size: 11.2px;
          line-height: 1;
          cursor: pointer;
        }

        /* Title for strategy section (kept, no grid) */
        .text-panel .tv-title {
          font-family: 'MonumentGrotesk-Semi-Mono', Arial, sans-serif;
          font-size: 16px; /* mirror site title text size */
          line-height: 1.2;
          color: #333;
          margin: 16px 0 8px 0;
          text-align: left;
        }

        .title-text p {
          font-family: 'KH Teka', Arial, sans-serif;
          font-size: 16px;
          line-height: 1.0;
          color: #333;
          margin-bottom: 20px;
          text-align: center;
        }

        .title-credit {
          font-family: 'KH Teka', Arial, sans-serif;
          font-size: 16px;
          line-height: 1.0;
          color: #333;
          text-align: center;
          margin-bottom: 0;
        }




        /* Two-column text overlay on last image */
        .final-text-overlay {
          /* remove absolute layout */
          position: static;
          left: auto; bottom: auto; transform: none;
          /* centered measure */
          width: clamp(320px, 72vw, 960px);
          max-width: 960px;
          margin: 0 auto 24px auto;

          display: grid;
          grid-template-columns: 1fr 1fr; /* two columns on desktop */
          gap: 40px;
          z-index: auto; /* no stacking tricks needed */
          padding-inline: var(--content-pad);
        }
        .final-text-column { /* keep the wrapper, normal flow */
          display: block;
        }
        .final-text-overlay p {
            font-family: 'KH Teka', Arial, sans-serif;
            font-size: 16px;
          line-height: 1.28;
          color: #000;           /* black text in footer */
          margin: 0 0 16px 0;
          text-align: left;
          text-shadow: none;     /* remove overlay shadow */
            hyphens: auto;
        }

        /* Footer slides in when the text finishes */
        .footer-panel {
          position: fixed;
          top: 100vh;
          left: var(--side-margin);
          right: var(--side-margin);
          height: 100vh;
          background: #fff;
          z-index: 1;
          transition: transform .6s ease;
          padding: 80px 0;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          overflow: hidden; /* ensure nothing spills outside */
          will-change: transform;
        }
        .footer-panel.show { transform: translateY(-100vh); }

        @media (prefers-reduced-motion: reduce) {
          .footer-panel { transition: none; }
        }

        /* Remove old duplicates (no explicit display none for text overlay anymore) */

        /* Navigation links below final text */
        .final-navigation-links {
          position: static; left: auto; bottom: auto; transform: none;
          width: clamp(320px, 72vw, 960px);
          max-width: 960px;
          margin: 12px auto 0 auto;

          display: flex;
          justify-content: center;
          align-items: center;
          gap: 24px;
          flex-wrap: wrap;
          padding-inline: var(--content-pad);
          font-size: 16px;
        }
        .final-navigation-links a {
          font-family: 'KH Teka', Arial, sans-serif;
          font-size: inherit;   /* inherit from container */
          color: #000;            /* black links in footer */
          text-decoration: none;
          text-shadow: none;
        }
        .final-navigation-links a:hover { text-decoration: underline; }





        /* === HUD demo (scoped to text panel) === */
        .text-panel .hud-slot {
          position: relative;
          width: 100%;
          height: 50vh;
          max-height: 600px;
          min-height: 280px;
          overflow: hidden;
          background: rgba(255,255,255,0.02);
          margin: 12px 0 var(--content-pad) 0;
          border: none; /* remove frame stroke */
          /* glassy embossed edge */
          box-shadow:
            inset 0 1px 0 rgba(255,255,255,0.50), /* top highlight */
            inset 0 -1px 0 rgba(0,0,0,0.18),      /* bottom shadow */
            0 2px 12px rgba(0,0,0,0.08);          /* soft outer glow */
          box-sizing: border-box;
        }
        .text-panel .hud-layer { position: absolute; inset: 0; }
        .text-panel .hud-grid { background-image:
            repeating-linear-gradient(to right, rgba(0,0,0,0.12) 0 1px, transparent 1px 16px),
            repeating-linear-gradient(to bottom, rgba(0,0,0,0.12) 0 1px, transparent 1px 16px);
          opacity: .35; }
        .text-panel .hud-images { filter: blur(10px); }
        .text-panel .hud-images img { position: absolute; object-fit: cover; display: block; opacity: .9; }
        .text-panel .hud-bitmap { filter: contrast(1.2) saturate(1.1); opacity: .6; }
        .text-panel .hud-micro img { position: absolute; object-fit: fill; display: block; box-shadow: 0 6px 14px rgba(0,0,0,.10); }
        .text-panel .hud-micro-label {
          position: absolute;
          font-family: 'MonumentGrotesk-Semi-Mono', Arial, sans-serif;
          font-size: 10px;
          line-height: 1;
          color: #000;
          letter-spacing: 0.02em;
          pointer-events: none;
          opacity: 0;
        }
        .text-panel .hud-threshold { pointer-events:none; background: rgba(255,255,255,0.12); mix-blend-mode: screen; backdrop-filter: contrast(1.6) saturate(1.4) brightness(1.25); }
        .text-panel .hud-overlay { pointer-events: none; }
        .text-panel .hud-rect { position:absolute; border:1px solid #ef4136; }
        .text-panel .hud-label { position:absolute; font-family: 'MonumentGrotesk-Semi-Mono', Arial, sans-serif; font-size: 8.4px; color: #000; }
        .text-panel .hud-label.top-left { top: 8px; left: 8px; }
        .text-panel .hud-label.bottom-left { bottom: 8px; left: 8px; }
        .text-panel .hud-label.bottom-right { bottom: 8px; right: 8px; }
        .text-panel .hud-lines { position:absolute; inset:0; width:100%; height:100%; display:block; }
        .text-panel .hud-lines line { stroke: rgb(0, 255, 0); stroke-width:1; opacity:1; vector-effect: non-scaling-stroke; shape-rendering: crispEdges; stroke-linecap: square; }
        .text-panel .hud-lines line.cross { stroke-dasharray:3 3; opacity:1; }
        /* Static glassy grid frame */
        .text-panel .glass-frame {
          position: relative;
          width: 100%;
          height: 36vh;
          max-height: 420px;
          min-height: 180px;
          margin: 8px 0 var(--content-pad) 0;
          background: #fff;
          overflow: hidden;
          box-shadow:
            inset 0 1px 0 rgba(255,255,255,0.50),
            inset 0 -1px 0 rgba(0,0,0,0.18),
            0 2px 12px rgba(0,0,0,0.08);
        }
        .text-panel .glass-frame .grid { position:absolute; inset:0; background-image:
            repeating-linear-gradient(to right, rgba(255,255,255,0.12) 0 1px, transparent 1px 16px),
            repeating-linear-gradient(to bottom, rgba(255,255,255,0.12) 0 1px, transparent 1px 16px); opacity:.35; }

        /* Code typing animation */
        .text-panel .code-anim {
          position: relative;
          width: 100%;
          margin: 8px 0 var(--content-pad) 0;
          background: #fff;
          box-shadow:
            inset 0 1px 0 rgba(255,255,255,0.50),
            inset 0 -1px 0 rgba(0,0,0,0.18),
            0 2px 12px rgba(0,0,0,0.08);
        }
        .text-panel .code-overlay {
          position: absolute; inset: 0;
          display: flex; align-items: center; justify-content: center;
          pointer-events: none;
          animation: none;
          opacity: 1;
        }
        .text-panel .code-overlay img { max-width: 100%; max-height: 252px; width: auto; height: auto; display: block; object-fit: contain; box-shadow: 0 6px 14px rgba(0,0,0,.12); }
        @keyframes fadeOverlay { from { opacity: 0.0; } to { opacity: 0.6; } }
        .text-panel .code-screen {
          color: #000;
          text-shadow: none;
          background: transparent;
          padding: 20px;
          height: 403px; /* 60% increase from 252px */
          overflow: hidden; /* hide scrollbar; programmatic scroll still works */
          -ms-overflow-style: none; /* IE/Edge */
          scrollbar-width: none;     /* Firefox */
          white-space: pre-wrap;
          font-family: 'MonumentGrotesk-Semi-Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
          font-size: 12px;
          line-height: 1.35;
          filter: blur(1px);
        }
        .text-panel .code-screen::-webkit-scrollbar { display: none; }
        .text-panel .code-threshold { position:absolute; inset:0; pointer-events:none; background: rgba(255,255,255,0.10); mix-blend-mode: screen; backdrop-filter: contrast(1.4) saturate(1.2) brightness(1.15); }
        .text-panel .hud-rect-label { position:absolute; left:2px; bottom:2px; font-family: 'MonumentGrotesk-Semi-Mono', Arial, sans-serif; font-size: 8.4px; color:#000; line-height:1; pointer-events:none; }

        /* Vector diagram animation */
        .text-panel .diagram-anim { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; }
        .text-panel .diagram-anim svg { width: 100%; height: 100%; }
        .text-panel .diagram-anim .stroke { stroke:#000; stroke-width:1; fill:none; stroke-linecap: square; }
        .text-panel .diagram-anim .text { fill:#000; font-family: 'MonumentGrotesk-Semi-Mono', Arial, sans-serif; font-size: 14px; }
        .text-panel .diagram-anim .draw { stroke-dasharray: 3000; stroke-dashoffset: 3000; animation: drawPath 2.2s ease forwards; }
        .text-panel .diagram-anim .draw.d2 { animation-delay: .4s; }
        .text-panel .diagram-anim .draw.d3 { animation-delay: .8s; }
        .text-panel .diagram-anim .draw.d4 { animation-delay: 1.2s; }
        @keyframes drawPath { to { stroke-dashoffset: 0; } }
        .text-panel .diagram-anim .dashed { stroke-dasharray: 4 4; }
        /* Breadth image + vector animation */
        .text-panel .breadth-anim { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; overflow:hidden; }
        .text-panel .breadth-anim img.ref { max-width: 88%; height:auto; opacity: .14; filter: grayscale(100%) contrast(1.1); }
        .text-panel .breadth-anim .breadth-svg { position:absolute; inset:0; display:block; }
        .text-panel .breadth-anim svg { width:100%; height:100%; display:block; }
        .text-panel .breadth-anim .stroke { stroke:#000; stroke-width:1.5; fill:none; stroke-linecap: square; vector-effect: non-scaling-stroke; }
        .text-panel .breadth-anim .dashed { stroke-dasharray: 4 6; opacity: .9; }
        .text-panel .breadth-anim .label { fill:#000; font-family: 'MonumentGrotesk-Semi-Mono', Arial, sans-serif; font-size: 12px; text-shadow: none; }
        .text-panel .breadth-anim .draw { stroke-dasharray: 1600; stroke-dashoffset: 1600; animation: drawBreadth 1.8s cubic-bezier(.22,.61,.36,1) forwards; }
        .text-panel .breadth-anim .d2 { animation-delay: .18s; }
        .text-panel .breadth-anim .d3 { animation-delay: .36s; }
        .text-panel .breadth-anim .d4 { animation-delay: .54s; }
        .text-panel .breadth-anim .glow { filter: drop-shadow(0 0 2px rgba(0,0,0,.15)); }
        @keyframes drawBreadth { to { stroke-dashoffset: 0; } }
        .text-panel .code-anim.breadth-frame { position: relative; height: 360px; }
        .text-panel .breadth-anim::before, .text-panel .breadth-anim::after { content:""; position:absolute; left:50%; top:50%; width:40%; aspect-ratio:1/1; transform: translate(-50%, -50%) scale(0.35); border-radius:50%; border:1px solid #000; opacity:.12; pointer-events:none; animation: ripple 3.6s ease-out infinite; }
        .text-panel .breadth-anim::after { width:52%; opacity:.10; border-style:dashed; animation-delay: 0.9s; }
        @keyframes ripple { 0% { transform: translate(-50%, -50%) scale(0.35); opacity:.16; } 100% { transform: translate(-50%, -50%) scale(2.2); opacity:0; } }
        @media (prefers-reduced-motion: reduce) {
          .text-panel .breadth-anim .draw { animation: none; stroke-dashoffset: 0; }
          .text-panel .breadth-anim::before, .text-panel .breadth-anim::after { animation: none; opacity: 0; }
        }
        /* Tablet and down */
        @media (max-width: 768px) {
          :root { --side-margin: 40px; --content-pad: 24px; }
          .text-panel {
            width: min(92vw, 560px);
            top: 12svh;
            height: 76svh;
            border-width: 1.5px;
          }
          .text-panel p { font-size: 15px; line-height: 1.3; }
          .text-panel img { width: 40%; max-width: 140px; margin: 20px auto; }
          .image-box { height: 500px; }
          .image-box img,
          .small-image-box img { width: 100%; height: 100%; margin: 0; max-width: none; object-fit: cover; object-position: center; display: block; }
          .image-box-natural { height: auto; min-height: 150px; }
          .image-box-natural img { width: 100%; height: auto; object-fit: contain; }
          .small-image-box { width: 250px; height: 250px; margin-bottom: 30px; display: block; overflow: hidden; }
          .image-box { margin-bottom: 30px; }
          .image-box-natural { margin-bottom: 30px; }
          .title-image { margin-bottom: 30px; padding: 0 var(--side-margin); }
          .title-image img { width: 250px; }
          .title-text { margin-bottom: 30px; }
          .title-text p, .title-credit { font-size: 15px; }
        }

        /* Small phones */
        @media (max-width: 480px) {
          :root { --side-margin: 20px; --content-pad: 16px; }
          .text-panel {
            width: 92vw;
            top: 12svh;
            height: 74svh;
            border-width: 1.5px;
          }
          .text-panel p { font-size: 14px; line-height: 1.35; }
          .text-panel img { width: 33%; max-width: 120px; margin: 16px auto; }
          .image-box { height: 500px; }
          .image-box img,
          .small-image-box img { width: 100%; height: 100%; margin: 0; max-width: none; object-fit: cover; object-position: center; display: block; }
          .image-box-natural { height: auto; min-height: 120px; }
          .image-box-natural img { width: 100%; height: auto; object-fit: contain; }
          .small-image-box { width: 200px; height: 200px; margin-bottom: 24px; display: block; overflow: hidden; }
          .image-box { margin-bottom: 24px; }
          .image-box-natural { margin-bottom: 24px; }
          .title-image { margin-bottom: 24px; padding: 0 var(--side-margin); }
          .title-image img { width: 200px; }
          .title-text { margin-bottom: 24px; }
          .title-text p, .title-credit { font-size: 14px; }
        }

        @media (max-width: 768px) {
            .final-text-overlay {
            grid-template-columns: 1fr;  /* single column on tablet/phone */
            gap: 20px;
            width: clamp(280px, 90vw, 640px);
            max-width: 640px;
          }
          .final-text-overlay p { font-size: 15px; line-height: 1.3; }
          .final-navigation-links {
            width: clamp(280px, 90vw, 640px);
            gap: 16px;
            font-size: 15px;
          }
        }

        @media (max-width: 480px) {
          .final-text-overlay p { font-size: 14px; line-height: 1.35; }
          .final-navigation-links { font-size: 14px; }
        }


        @media (max-width: 768px) {
          .nav-play-button { width: 32px; height: 32px; }
          .nav-play-button .icon { width: 16px; height: 16px; }
        }

        /* === Scroll cubes (central column) === */
        .cube-block {
          width: 100%;
          display: flex;
          justify-content: center;
          align-items: center;
          margin: 40px 0;
          position: relative;
          z-index: 10;                    /* top layer in textPanel */
        }

        .cube-scene {
          width: 280px;
          height: 280px;
          perspective: 1200px;
          display: flex;
          justify-content: center;
          align-items: center;
          cursor: grab;
          touch-action: none; /* allow pointer-driven rotation without scrolling */
        }

        .cube-scene.dragging { cursor: grabbing; }

        .cube {
          position: relative;
          width: 200px;
          height: 200px;
          transform-style: preserve-3d;
          will-change: transform;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

        .cube-face {
          position: absolute;
          width: 200px;
          height: 200px;
          background: rgba(255,255,255,0.98);  /* 98% opacity */
          border: 2px solid #333;         /* match site stroke weight */
          backface-visibility: visible;   /* show back faces to see through */
          transform: translateZ(0);       /* force GPU acceleration */
          -webkit-transform: translateZ(0);
          display: flex;                  /* center any face content */
          align-items: center;
          justify-content: center;
          text-align: center;
        }

        .cube-text {
          font-family: 'MonumentGrotesk-Semi-Mono', Arial, sans-serif;
          font-weight: 400;
          font-size: 11.2px;             /* 20% smaller than 14px */
          line-height: 1.2;
          color: #000;
          padding: 0 12px;               /* avoid touching borders */
          user-select: none;              /* prevent accidental selection while dragging */
          pointer-events: none;           /* don't block drag interactions */
        }

        .cube-clock {
          font-family: 'MonumentGrotesk-Semi-Mono', Arial, sans-serif;
          font-weight: 400;
          font-size: 11.2px;
          line-height: 1;
          color: #000;
          padding: 0 8px;
          user-select: none;
          pointer-events: none;
        }

        /* Build a proper cube: 200×200×200 - all sides equal */
        .cube-face--front  { transform: translateZ(100px); }
        .cube-face--back   { transform: rotateY(180deg) translateZ(100px); }
        .cube-face--right  { transform: rotateY(90deg) translateZ(100px); }
        .cube-face--left   { transform: rotateY(-90deg) translateZ(100px); }
        .cube-face--top    { transform: rotateX(90deg) translateZ(100px); }
        .cube-face--bottom { transform: rotateX(-90deg) translateZ(100px); }

        @media (prefers-reduced-motion: reduce) {
          .cube { transition: none !important; }
        }


    </style>
</head>
<body>
    <!-- Left Margin -->
    <div class="left-margin"></div>

    <!-- Right Margin -->
    <div class="right-margin"></div>


    <!-- Fixed Navigation Bar -->
    <nav class="nav-bar">
        <p class="nav-text"></p>
        <button class="nav-play-button" id="playButton" aria-label="Play auto-scroll" title="Play">
          <svg class="icon icon-play" viewBox="0 0 24 24" aria-hidden="true">
            <polygon points="8,5 19,12 8,19"></polygon>
          </svg>
          <svg class="icon icon-pause" viewBox="0 0 24 24" aria-hidden="true">
            <rect x="6" y="5" width="4" height="14"></rect>
            <rect x="14" y="5" width="4" height="14"></rect>
          </svg>
        </button>
        <p class="nav-depth-counter" id="navDepthCounter">0m</p>
    </nav>
    


    <!-- Unified hero -->
    <main id="hero" class="hero">
      <div id="bg" class="bg">
        <div class="background-block"><img src="assets/images/background/001.png" alt="Background 001" decoding="async" fetchpriority="high"></div>
        <div class="background-separator"></div>
        <div class="background-block"><img src="assets/images/background/002.png" alt="Background 002" decoding="async"></div>
        <div class="background-separator"></div>
        <div class="background-block"><img src="assets/images/background/002.5.png" alt="Background 002.5" decoding="async"></div>
        <div class="background-separator"></div>
        <div class="background-block"><img src="assets/images/background/003.png" alt="Background 003" decoding="async"></div>
        <div class="background-separator"></div>
        <div class="background-block"><img src="assets/images/background/004.png" alt="Background 004" decoding="async"></div>
        <div class="background-separator"></div>
        <div class="background-block"><img src="assets/images/background/005.png" alt="Background 005" decoding="async"></div>
        <div class="background-separator"></div>
        <div class="background-block"><img src="assets/images/background/006-3.png" alt="Background 006-3" decoding="async"></div>
      </div>

      <section id="textPanel" class="text-panel" tabindex="0" aria-label="Story">
        <!-- === 3D Scroll Cube (Header) === -->
        <div class="cube-block" data-ax="xy" data-speed="1.00" data-ease="smooth">
          <div class="cube-scene">
            <div class="cube">
              <div class="cube-face cube-face--front"><span class="cube-text">Oscar B Morgan</span></div>
              <div class="cube-face cube-face--back"><span class="cube-text">studio@oscarbmorgan.com</span></div>
              <div class="cube-face cube-face--right"><span class="cube-text">Image and text services</span></div>
              <div class="cube-face cube-face--left"><span class="cube-text">© Oscar B Morgan 2025</span></div>
              <div class="cube-face cube-face--top"><span id="helsinkiClock" class="cube-clock"></span></div>
              <div class="cube-face cube-face--bottom"></div>
            </div>
          </div>
        </div>
        
        <!-- Hero intro framed text box -->
        <div class="hero-text-box" role="region" aria-label="Intro text">
          <p id="heroIntroText" class="hero-text"></p>
          <a class="hero-cta" href="mailto:studio@oscarbmorgan.com">[Contact]</a>
        </div>
        <div class="hero-spacer"></div>

        <p class="tv-title">Creative strategy through cultural interrogation</p>

        <!-- HUD demo block -->
        <div class="hud-slot" aria-label="HUD demo">
          <div class="hud-layer hud-grid"></div>
          <div class="hud-layer hud-images" id="hudImgs"></div>
          <canvas class="hud-layer hud-bitmap" id="hudBitmap"></canvas>
          <div class="hud-layer hud-micro" id="hudMicro"></div>
          <div class="hud-layer hud-threshold"></div>
          <div class="hud-layer hud-overlay" id="hudOverlay">
            <div class="hud-label top-left" id="hudTL">00:00:00 • X:0 Y:0</div>
            <div class="hud-label bottom-left" id="hudBL">[304]</div>
            <div class="hud-label bottom-right" id="hudBR">00129</div>
            <svg class="hud-lines" id="hudLines" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true"></svg>
          </div>
        </div>

        
        
        <div class="image-box image-box-natural">
          <img src="assets/images/popups/009.png" alt="Popup Image 009" decoding="async">
        </div>
        <p class="tv-title">Technology as tools for growth and greater understanding</p>

        <div class="code-anim">
          <pre id="codeScreen" class="code-screen" aria-label="Code typing animation"></pre>
          <div class="code-threshold"></div>
        </div>

        <p class="tv-title">Breadth, but also depth.</p>
        <div class="code-anim breadth-frame" aria-label="Breadth animation frame">
          <div class="breadth-anim" aria-hidden="true">
            <!-- light bitmap reference (fallback) -->
            <img class="ref" src="assets/images/grid 3/breadth.png" alt="Breadth diagram reference" decoding="async">
            <!-- vector overlay -->
            <div class="breadth-svg">
              <svg viewBox="0 0 960 540" preserveAspectRatio="xMidYMid meet" aria-hidden="true">
                <!-- Outer frame (approximate to image edges) -->
                <rect class="stroke draw glow" x="100" y="60" width="760" height="420" rx="2" ry="2" />
                <!-- Central burst lines -->
                <line class="stroke draw d2" x1="480" y1="270" x2="860" y2="270" />
                <line class="stroke draw d2" x1="480" y1="270" x2="100" y2="270" />
                <line class="stroke draw d3" x1="480" y1="270" x2="480" y2="100" />
                <line class="stroke draw d3" x1="480" y1="270" x2="480" y2="440" />
                <!-- Diagonals -->
                <line class="stroke draw d3" x1="480" y1="270" x2="840" y2="120" />
                <line class="stroke draw d3" x1="480" y1="270" x2="840" y2="420" />
                <line class="stroke draw d3" x1="480" y1="270" x2="120" y2="120" />
                <line class="stroke draw d3" x1="480" y1="270" x2="120" y2="420" />
                <!-- Concentric arcs (approximated as rounded rectangles) -->
                <rect class="stroke dashed draw d4" x="180" y="140" width="600" height="260" rx="130" ry="130" />
                <rect class="stroke dashed draw d4" x="240" y="180" width="480" height="180" rx="90" ry="90" />
                <!-- Labels -->
                <text class="label" x="480" y="88" text-anchor="middle">breadth over depth</text>
              </svg>
            </div>
          </div>
          <div class="code-threshold"></div>
        </div>
        <div class="image-box image-box-natural">
          <img src="assets/images/popups/008.png" alt="Popup Image 008" decoding="async">
        </div>
        <div class="small-image-box">
          <img src="assets/images/popups/007.png" alt="Popup Image 007" decoding="async">
        </div>
        <div class="image-box image-box-natural">
          <img src="assets/images/journey/001.png" alt="Journey Image 001" decoding="async">
        </div>
        <div class="small-image-box">
          <img src="assets/images/icons/SVG/icon-3.svg" alt="Icon 3" decoding="async">
        </div>
        
        <!-- === 3D Scroll Cube 1 === -->
        <div class="cube-block" data-ax="xy" data-speed="1.00" data-ease="smooth">
          <div class="cube-scene">
            <div class="cube">
              <div class="cube-face cube-face--front"></div>
              <div class="cube-face cube-face--back"></div>
              <div class="cube-face cube-face--right"></div>
              <div class="cube-face cube-face--left"></div>
              <div class="cube-face cube-face--top"></div>
              <div class="cube-face cube-face--bottom"></div>
            </div>
          </div>
        </div>
        
        <div class="image-box image-box-natural">
          <img src="assets/images/journey/002.png" alt="Journey Image 002" decoding="async">
        </div>
        <div class="small-image-box">
          <img src="assets/images/icons/SVG/journey-line-2.svg" alt="Journey Line 2" decoding="async">
        </div>
        <div class="image-box">
          <img src="assets/images/journey/003.png" alt="Journey Image 003" decoding="async">
        </div>
        <div class="small-image-box">
          <img src="assets/images/icons/SVG/Journey-line.svg" alt="Journey Line" decoding="async">
        </div>
        <div class="image-box">
          <img src="assets/images/popups/004.png" alt="Image 004" decoding="async">
        </div>
        <div class="small-image-box">
          <img src="assets/images/icons/SVG/city-scape.svg" alt="City Scape" decoding="async">
        </div>
        
        <!-- === 3D Scroll Cube 2 === -->
        <div class="cube-block" data-ax="xz" data-speed="0.90" data-ease="easeOut">
          <div class="cube-scene">
            <div class="cube">
              <div class="cube-face cube-face--front"></div>
              <div class="cube-face cube-face--back"></div>
              <div class="cube-face cube-face--right"></div>
              <div class="cube-face cube-face--left"></div>
              <div class="cube-face cube-face--top"></div>
              <div class="cube-face cube-face--bottom"></div>
            </div>
          </div>
        </div>
        
        <div class="image-box">
          <img src="assets/images/popups/005.png" alt="Image 005" decoding="async">
        </div>
        <div class="small-image-box">
          <img src="assets/images/icons/SVG/ICON-2.svg" alt="Icon 2" decoding="async">
        </div>
        <div class="image-box">
          <img src="assets/images/popups/006.png" alt="Image 006" decoding="async">
        </div>
        <div class="small-image-box">
          <img src="assets/images/icons/SVG/icon-3.svg" alt="Icon 3" decoding="async">
        </div>
        
        <!-- === 3D Scroll Cube 3 === -->
        <div class="cube-block" data-ax="yz" data-speed="1.15" data-ease="easeIn">
          <div class="cube-scene">
            <div class="cube">
              <div class="cube-face cube-face--front"></div>
              <div class="cube-face cube-face--back"></div>
              <div class="cube-face cube-face--right"></div>
              <div class="cube-face cube-face--left"></div>
              <div class="cube-face cube-face--top"></div>
              <div class="cube-face cube-face--bottom"></div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer id="footerPanel" class="footer-panel" aria-label="Footer">
      <div class="final-text-overlay">
                <div class="final-text-column">
                    <p>The convergence of art and technology creates new possibilities for human expression. Each pixel, each line of code, each design decision becomes part of a larger conversation about how we communicate, connect, and create meaning in the digital age.</p>
                </div>
                <div class="final-text-column">
                    <p>The future belongs to those who can navigate complexity while maintaining clarity of vision. As tools evolve and possibilities multiply, the fundamental challenge remains: how do we create work that serves human needs and elevates the human experience?</p>
                </div>
            </div>
      <div class="final-navigation-links">
        <a href="#instagram">Instagram</a>
        <a href="#youtube">Youtube</a>
        <a href="#illustration">Illustration</a>
        <a href="#nutrition">Nutrition</a>
        </div>
    </footer>

    <script>
  const bg = document.getElementById('bg');
  const textPanel = document.getElementById('textPanel');
  const footer = document.getElementById('footerPanel');
        const navDepthCounter = document.getElementById('navDepthCounter');
  const heroEl = document.getElementById('hero');

  const REDUCED = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  function clamp(v, min, max) { return Math.min(max, Math.max(min, v)); }

  // === Scroll-driven cube controller ===
  const cubeBlocks = Array.from(document.querySelectorAll('.cube-block'));
  const REDUCED_MOTION = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  // Cube rotation state
  const cubeStates = cubeBlocks.map((block, i) => ({
    block,
    scene: block.querySelector('.cube-scene'),
    cube: block.querySelector('.cube'),
    rotX: 0,
    rotY: 0,
    rotZ: 0,
    baseSpeedX: (0.3 + i * 0.15) * 0.075,  // 92.5% slower (7.5% of original)
    baseSpeedY: (0.4 + i * 0.12) * 0.075,
    baseSpeedZ: (0.2 + i * 0.08) * 0.075,
    scrollMultiplier: 0,
    hoverBoost: 0,
    isDragging: false,
    lastPointerX: 0,
    lastPointerY: 0,
    dragSensitivity: 0.5  // degrees per pixel
  }));

  // Hover pulse: brief 10% speed boost that decays
  for (const state of cubeStates) {
    const hoverEl = state.block; // trigger on the whole cube block area
    if (!hoverEl) continue;
    hoverEl.addEventListener('mouseenter', () => { state.hoverBoost = 0.10; });
    hoverEl.addEventListener('mouseleave', () => { state.hoverBoost = 0; });
  }

  // Pointer drag controls for cube rotation
  for (const state of cubeStates) {
    const sceneEl = state.scene;
    if (!sceneEl) continue;
    sceneEl.addEventListener('pointerdown', (e) => {
      state.isDragging = true;
      state.lastPointerX = e.clientX;
      state.lastPointerY = e.clientY;
      sceneEl.classList.add('dragging');
      try { sceneEl.setPointerCapture(e.pointerId); } catch (_) {}
    });
    sceneEl.addEventListener('pointermove', (e) => {
      if (!state.isDragging) return;
      const dx = e.clientX - state.lastPointerX;
      const dy = e.clientY - state.lastPointerY;
      // Horizontal drag rotates around Y, vertical drag rotates around X
      state.rotY += dx * state.dragSensitivity;
      state.rotX -= dy * state.dragSensitivity;
      state.lastPointerX = e.clientX;
      state.lastPointerY = e.clientY;
    });
    function endDrag(e) {
      if (!state.isDragging) return;
      state.isDragging = false;
      sceneEl.classList.remove('dragging');
      try { sceneEl.releasePointerCapture(e.pointerId); } catch (_) {}
    }
    sceneEl.addEventListener('pointerup', endDrag);
    sceneEl.addEventListener('pointercancel', endDrag);
    sceneEl.addEventListener('pointerleave', endDrag);
  }

  // progress of an element inside a scroll container: 0 at enter, 1 when fully passed
  function elementProgress(el, scroller) {
    const r = el.getBoundingClientRect();
    const s = scroller.getBoundingClientRect();
    const vh = s.height;
    const p = 1 - clamp((r.top - s.top) / vh, 0, 1);
    return p;
  }

  // Animate cubes continuously
  let lastCubeTime = performance.now();
  function animateCubes(time) {
    if (!REDUCED_MOTION && cubeStates.length > 0) {
      const dt = (time - lastCubeTime) / 1000; // delta in seconds
      lastCubeTime = time;

      for (const state of cubeStates) {
        if (!state.cube) continue;

        // Calculate scroll-based speed multiplier
        const progress = elementProgress(state.block, textPanel);
        state.scrollMultiplier = 1 + progress * 4; // 1x to 5x speed based on scroll

        // Update rotation angles (include transient hover boost, pause while dragging)
        const speedMult = (state.isDragging ? 0 : state.scrollMultiplier * (1 + state.hoverBoost));
        state.rotX += state.baseSpeedX * speedMult * dt * 60; // normalize to 60fps
        state.rotY += state.baseSpeedY * speedMult * dt * 60;
        state.rotZ += state.baseSpeedZ * speedMult * dt * 60;

        // Apply transform with off-axis rotation
        state.cube.style.transform = 
          `rotateX(${state.rotX}deg) rotateY(${state.rotY}deg) rotateZ(${state.rotZ}deg)`;

        // Decay hover pulse quickly (~0.4s)
        if (state.hoverBoost > 0) {
          state.hoverBoost = Math.max(0, state.hoverBoost - dt * 2.5);
        }
      }
    }
    requestAnimationFrame(animateCubes);
  }
  requestAnimationFrame(animateCubes);

  function update() {
    const textMax = Math.max(1, textPanel.scrollHeight - textPanel.clientHeight);
    const t = clamp(textPanel.scrollTop / textMax, 0, 1);

    // Map text progress to background timeline with offset
    const offsetStart = 0.00; // reveal full top of first image
    const offsetEnd   = 1.00;

    // Use the hero's actual height (works with 100svh on mobile)
    const heroH = heroEl.clientHeight;
    const bgMax  = Math.max(1, bg.scrollHeight - heroH);
    const bgProg = clamp(offsetStart + (offsetEnd - offsetStart) * t, 0, 1);
    const y      = -bgProg * bgMax;

    // Reduced motion: freeze background, but still update UI state
    bg.style.transform = REDUCED ? 'translateY(0)' : `translateY(${y}px)`;

    // Depth counter should start at 0m (use text progress, not bgProg)
    if (navDepthCounter) {
      const depth = Math.round(t * 10000);
      navDepthCounter.textContent = depth === 0 ? '0m' : `- ${depth}m`;
    }

    // Footer reveal at end of text
    const atEnd = t >= 0.999;
    if (footer) footer.classList.toggle('show', atEnd);
    if (atEnd && typeof stopAuto === 'function' && typeof playRaf !== 'undefined' && playRaf) {
      stopAuto();
    }
  }

  // Keep rAF smoothness without heavy work in the scroll handler
  let ticking = false;
  function onTextScroll() {
    if (!ticking) {
      requestAnimationFrame(() => { update(); ticking = false; });
      ticking = true;
    }
  }

  function isInsideTextPanel(el) {
    return textPanel && textPanel.contains(el);
  }

  function globalWheelRouter(e) {
    if (!isInsideTextPanel(e.target)) {
      e.preventDefault();
      textPanel.scrollBy({ top: e.deltaY, behavior: 'auto' });
    }
    // if inside the panel, let native scrolling happen
  }

  textPanel.addEventListener('scroll', onTextScroll, { passive: true });
  window.addEventListener('resize', () => requestAnimationFrame(update));
  window.addEventListener('load',   () => requestAnimationFrame(update));

  if (document.fonts && document.fonts.ready) {
    document.fonts.ready.then(() => requestAnimationFrame(update));
  }

  window.addEventListener('wheel', globalWheelRouter, { passive: false });
  window.addEventListener('touchstart', onTouchStart, { passive: false });
  window.addEventListener('touchmove',  onTouchMove,  { passive: false });

  new ResizeObserver(() => requestAnimationFrame(update)).observe(textPanel);

  // Touch routing for mobile (gesture anywhere to scroll the text panel)
  let touchRouting = { active: false, y: 0 };
  function onTouchStart(e) {
    touchRouting.active = !isInsideTextPanel(e.target);
    touchRouting.y = e.touches[0].clientY;
  }
  function onTouchMove(e) {
    if (!touchRouting.active) return; // native inside the panel
    e.preventDefault();
    const dy = touchRouting.y - e.touches[0].clientY;
    textPanel.scrollBy({ top: dy, behavior: 'auto' });
    touchRouting.y = e.touches[0].clientY;
  }

  // --- Play/Pause auto-scroll for the text panel ---
  const playBtn = document.getElementById('playButton');
  let playRaf = null;
  let lastTs = null;

  function autoStep(ts) {
    if (lastTs == null) lastTs = ts;
    const dt = (ts - lastTs) / 1000;
    lastTs = ts;

    const SPEED_PX_PER_SEC = 220; // tune to taste
    textPanel.scrollTop += SPEED_PX_PER_SEC * dt;

    // stop at bottom
    if (textPanel.scrollTop + textPanel.clientHeight >= textPanel.scrollHeight - 1) {
      stopAuto();
                    return;
                }
    playRaf = requestAnimationFrame(autoStep);
  }

  function startAuto() {
    textPanel.focus({ preventScroll: true });
    if (REDUCED) {
      // Respect reduced motion: nudge one "page" instead of continuous animation
      textPanel.scrollBy({ top: textPanel.clientHeight * 0.9, behavior: 'smooth' });
      return;
    }
    if (playRaf) return;
    playBtn.classList.add('is-playing');
    playBtn.setAttribute('aria-label', 'Pause auto-scroll');
    lastTs = null;
    playRaf = requestAnimationFrame(autoStep);
  }

  function stopAuto() {
    if (playRaf) cancelAnimationFrame(playRaf);
    playRaf = null;
    lastTs = null;
    playBtn.classList.remove('is-playing');
    playBtn.setAttribute('aria-label', 'Play auto-scroll');
  }

  playBtn.addEventListener('click', () => {
    if (playRaf) stopAuto(); else startAuto();
  });

  // Optional: pause auto-scroll on any manual interaction
  textPanel.addEventListener('wheel', stopAuto, { passive: true });
  textPanel.addEventListener('touchstart', stopAuto, { passive: true });

  // --- Helsinki clock on header cube (Europe/Helsinki) ---
  (function initHelsinkiClock(){
    const el = document.getElementById('helsinkiClock');
    if (!el) return;
    function fmt(){
      const now = new Date();
      // Use Intl to format time in Helsinki, 24h HH:mm:ss
      const str = new Intl.DateTimeFormat('en-GB', {
        timeZone: 'Europe/Helsinki',
        hour: '2-digit', minute: '2-digit', second: '2-digit',
        hour12: false
      }).format(now);
      el.textContent = str;
    }
    fmt();
    setInterval(fmt, 1000);
  })();

  // --- Initialize hero copy (word-by-word rollout) ---
  (function initHeroCopy(){
    const el = document.getElementById('heroIntroText');
    if (!el) return;
    const text = 'Full stack creative using AI integration to produce modern perspectives on the image, text, communications strategy, and sound. Based between London, Milan, and Helsinki.';
    const words = text.split(/\s+/);
    const frag = document.createDocumentFragment();
    const STAGGER = 0.10; // faster stagger (50% faster rollout)
    words.forEach((w, i) => {
      const span = document.createElement('span');
      span.className = 'hero-word';
      span.style.setProperty('--d', (i * STAGGER) + 's');
      span.textContent = w;
      frag.appendChild(span);
      if (i !== words.length - 1) frag.appendChild(document.createTextNode(' '));
    });
    el.textContent = '';
    el.appendChild(frag);
  })();

  // TV wall removed
  // --- Code typing animation ---
  (function initCodeTyping(){
    const el = document.getElementById('codeScreen');
    if (!el) return;
    // Generate ~100 lines of pseudo-code from site snippets
    const base = [
      "// HUD configuration",
      "const HUD_STROKE = 1;",
      "const COLOR_GREEN = 'rgb(0,255,0)';",
      "function clamp(v,min,max){ return Math.min(max, Math.max(min, v)); }",
      "function lerp(a,b,t){ return a + (b-a)*t; }",
      "",
      "// Initialize movers",
      "const movers = Array.from({length:8}).map((_,i)=>({",
      "  x: Math.random(), y: Math.random(),",
      "  vx: (Math.random()*2-1)*0.056,",
      "  vy: (Math.random()*2-1)*0.056",
      "}));",
      "",
      "// Animation frame",
      "function frame(time){",
      "  for(const m of movers){",
      "    m.x = clamp(m.x + m.vx*0.016, 0, 1);",
      "    m.y = clamp(m.y + m.vy*0.016, 0, 1);",
      "  }",
      "  requestAnimationFrame(frame);",
      "}",
      "frame(performance.now());"
    ];
    const lines = [];
    while (lines.length < 100) lines.push(...base);
    lines.length = 100;

    let i = 0, j = 0, text = '';
    function typeNext(){
      if (i >= lines.length) { i = 0; j = 0; text = ''; el.textContent = ''; }
      const s = lines[i] + "\n";
      text += s[j++];
      el.textContent = text + (j % 2 ? '_' : '');
      // keep the latest line in view
      el.scrollTop = el.scrollHeight;
      if (j >= s.length) { i++; j = 0; setTimeout(typeNext, 120); return; }
      setTimeout(typeNext, 18); // typing speed per char
    }
    typeNext();
  })();
  // --- HUD demo animation ---
  (function initHud(){
    const slot = document.querySelector('.hud-slot');
    if (!slot) return;
    const imgs = document.getElementById('hudImgs');
    const micro = document.getElementById('hudMicro');
    const overlay = document.getElementById('hudOverlay');
    const sources = [
      'assets/images/grid 1/cRXKvV.png',
      'assets/images/grid 1/enJIbX.png',
      'assets/images/grid 1/eO4SnI.png',
      'assets/images/grid 1/k2UkPc.png',
      'assets/images/grid 1/K8ayJ5.png',
      'assets/images/grid 1/LRNiuu.png',
      'assets/images/grid 1/MXVl6v.png',
      'assets/images/grid 1/n0Lajj.png',
      'assets/images/grid 1/NO7cDY.png',
      'assets/images/grid 1/s12ks0.png',
      'assets/images/grid 1/TSxc3W.png',
      'assets/images/grid 1/uJAfnB.png'
    ];

    const cells = 8; // number of moving images
    const movers = [];
    for (let i = 0; i < cells; i++) {
      const img = document.createElement('img');
      img.src = sources[i % sources.length];
      img.alt = 'hud img';
      img.style.width = '38%';
      img.style.height = 'auto';
      img.style.opacity = '0.9';
      imgs.appendChild(img);
      const m = {
        el: img,
        x: Math.random(), y: Math.random(),
        vx: (Math.random()*2-1) * 0.056, // 30% slower than original 0.08
        vy: (Math.random()*2-1) * 0.056,
        fade: Math.random()*Math.PI*2,
      };
      movers.push(m);
    }

    const rects = [
      { el: makeRect(), w: .22, h: .22, s: 0 },
      { el: makeRect(), w: .20, h: .20, s: 0 },
      { el: makeRect(), w: .16, h: .16, s: 0 },
    ];

    // micro sprites (unblurred, small, particle-like strobe)
    const micros = [];
    for (let i = 0; i < 12; i++) {
      const spr = document.createElement('img');
      spr.src = sources[i % sources.length];
      spr.alt = 'micro';
      spr.style.width = '12%';
      spr.style.height = '12%';
      spr.style.objectFit = 'cover';
      spr.style.opacity = '0';
      spr.style.position = 'absolute';
      micro.appendChild(spr);
      micros.push({ el: spr, t: Math.random()*5 });
    }

    function makeRect(){
      const r = document.createElement('div');
      r.className = 'hud-rect';
      const label = document.createElement('div');
      label.className = 'hud-rect-label';
      label.textContent = '0000';
      r.appendChild(label);
      overlay.appendChild(r);
      return r;
    }

    function randInt(min, max){ return Math.floor(min + Math.random()*(max-min+1)); }

    let last = performance.now();
    function frame(t){
      const dt = Math.min(0.06, (t - last)/1000); last = t;
      const bounds = slot.getBoundingClientRect();
      const W = bounds.width, H = bounds.height;
      // move images
      for (const m of movers) {
        // move and bounce within slot
        m.x += m.vx * dt; m.y += m.vy * dt;
        if (m.x < 0 || m.x > 1) { m.vx *= -1; m.x = Math.max(0, Math.min(1, m.x)); }
        if (m.y < 0 || m.y > 1) { m.vy *= -1; m.y = Math.max(0, Math.min(1, m.y)); }
        const px = m.x * (W - m.el.clientWidth);
        const py = m.y * (H - m.el.clientHeight);
        m.el.style.transform = `translate(${px}px, ${py}px)`;
        // fade in/out to create space
        m.fade += dt * (0.6 + Math.random()*0.4);
        const a = (Math.sin(m.fade) * 0.5 + 0.5); // 0..1
        m.el.style.opacity = (0.25 + 0.75 * a).toFixed(2);
      }
      // track a mover per rect
      rects.forEach((r, i) => {
        const target = movers[(i*3 + Math.floor(t/1000)) % movers.length];
        // size pulse for rectangle
        r.s += dt * (0.6 + i * 0.3);
        const sizeMult = 1 + Math.sin(r.s) * 0.25; // +/-25%
        const rw = r.w * W * sizeMult, rh = r.h * H * sizeMult;
        const tx = (target.x * W) - rw/2;
        const ty = (target.y * H) - rh/2;
        r.el.style.left = Math.round(tx) + 'px';
        r.el.style.top  = Math.round(ty) + 'px';
        r.el.style.width  = Math.round(rw) + 'px';
        r.el.style.height = Math.round(rh) + 'px';
        // update label numeric output
        const lbl = r.el.querySelector('.hud-rect-label');
        if (lbl) {
          lbl.textContent = (Math.round(target.x*1000) + ',' + Math.round(target.y*1000));
        }
      });

      // motion detection lines + axes
      const lines = document.getElementById('hudLines');
      if (lines) {
        const pts = rects.map(r => ({
          x: (parseFloat(r.el.style.left)||0) + (parseFloat(r.el.style.width)||0)/2,
          y: (parseFloat(r.el.style.top)||0)  + (parseFloat(r.el.style.height)||0)/2
        }));
        // build lines: 0-1, 1-2, 2-0
        const w = W, h = H;
        const toUnit = (v, max) => (v / max * 100);
        lines.setAttribute('viewBox', '0 0 100 100');
        lines.innerHTML = '';
        const pairs = [[0,1],[1,2],[2,0]];
        for (const [a,b] of pairs) {
          const ln = document.createElementNS('http://www.w3.org/2000/svg', 'line');
          ln.setAttribute('x1', toUnit(pts[a].x, w));
          ln.setAttribute('y1', toUnit(pts[a].y, h));
          ln.setAttribute('x2', toUnit(pts[b].x, w));
          ln.setAttribute('y2', toUnit(pts[b].y, h));
          lines.appendChild(ln);
        }
        // crosshair axes through primary rect (0)
        const cx = toUnit(pts[0].x, w), cy = toUnit(pts[0].y, h);
        const xAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        xAxis.setAttribute('class','cross');
        xAxis.setAttribute('x1','0'); xAxis.setAttribute('y1', cy);
        xAxis.setAttribute('x2','100'); xAxis.setAttribute('y2', cy);
        lines.appendChild(xAxis);
        const yAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        yAxis.setAttribute('class','cross');
        yAxis.setAttribute('x1', cx); yAxis.setAttribute('y1','0');
        yAxis.setAttribute('x2', cx); yAxis.setAttribute('y2','100');
        lines.appendChild(yAxis);
      }

      // numeric labels (time + X/Y)
      const tl = document.getElementById('hudTL');
      const bl = document.getElementById('hudBL');
      const br = document.getElementById('hudBR');
      const n1 = randInt(0,9999).toString().padStart(4,'0');
      const n2 = randInt(200,399);
      const now = new Date();
      const hh = now.getHours().toString().padStart(2,'0');
      const mm = now.getMinutes().toString().padStart(2,'0');
      const ss = now.getSeconds().toString().padStart(2,'0');
      const primary = rects[0];
      const px = ((parseFloat(primary.el.style.left)||0) + (parseFloat(primary.el.style.width)||0)/2) / (slot.getBoundingClientRect().width);
      const py = ((parseFloat(primary.el.style.top)||0)  + (parseFloat(primary.el.style.height)||0)/2) / (slot.getBoundingClientRect().height);
      const xOut = Math.round(px*1000), yOut = Math.round(py*1000);
      tl.textContent = `${hh}:${mm}:${ss} • X:${xOut} Y:${yOut}`;
      bl.textContent = '['+n2+']';
      br.textContent = n1;

      // update micro sprites (strobe pops at random positions without jittering once placed)
      for (const m of micros) {
        m.t -= dt;
        if (m.t <= 0) {
          // re-spawn: random position and short visible burst
          const x = Math.random();
          const y = Math.random();
          const px = x * (W - m.el.clientWidth);
          const py = y * (H - m.el.clientHeight);
          m.el.style.transform = `translate(${px}px, ${py}px)`;
          m.t = (0.25 + Math.random() * 1.25) * 2; // 50% slower (longer between pops)
          // animate opacity burst (harder cut)
          m.el.style.transition = 'opacity 240ms ease-out';
          m.el.style.opacity = '0.9';
          setTimeout(() => { m.el && (m.el.style.opacity = '0'); }, 200 + Math.floor(Math.random()*800));
        }
      }

      requestAnimationFrame(frame);
    }
    requestAnimationFrame(frame);
  })();
    </script>
</body>
</html>
